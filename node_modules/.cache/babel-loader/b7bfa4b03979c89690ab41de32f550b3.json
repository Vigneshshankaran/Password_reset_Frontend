{"ast":null,"code":"import _asyncToGenerator from\"/home/vignesh/Downloads/AuthInMern-Password-Reset-In-MERN/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vignesh/Downloads/AuthInMern-Password-Reset-In-MERN/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/vignesh/Downloads/AuthInMern-Password-Reset-In-MERN/client/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState,Fragment}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import styles from\"./styles.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PasswordReset=function PasswordReset(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),validUrl=_useState2[0],setValidUrl=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),msg=_useState6[0],setMsg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var param=useParams();var url=\"https://password-reset-url.herokuapp.com/api/password-reset/\".concat(param.id,\"/\").concat(param.token);useEffect(function(){var verifyUrl=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(url);case 3:setValidUrl(true);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);setValidUrl(false);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function verifyUrl(){return _ref.apply(this,arguments);};}();verifyUrl();},[param,url]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(url,{password:password});case 4:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setMsg(data.message);setError(\"\");window.location=\"/login\";_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);if(_context2.t0.response&&_context2.t0.response.status>=400&&_context2.t0.response.status<=500){setError(_context2.t0.response.data.message);setMsg(\"\");}case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Fragment,{children:validUrl?/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(\"form\",{className:styles.form_container,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,required:true,className:styles.input}),error&&/*#__PURE__*/_jsx(\"div\",{className:styles.error_msg,children:error}),msg&&/*#__PURE__*/_jsx(\"div\",{className:styles.success_msg,children:msg}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.green_btn,children:\"Submit\"})]})}):/*#__PURE__*/_jsx(\"h1\",{children:\"404 Not Found\"})});};export default PasswordReset;","map":{"version":3,"sources":["/home/vignesh/Downloads/AuthInMern-Password-Reset-In-MERN/client/src/components/PasswordReset/index.jsx"],"names":["useEffect","useState","Fragment","useParams","axios","styles","PasswordReset","validUrl","setValidUrl","password","setPassword","msg","setMsg","error","setError","param","url","id","token","verifyUrl","get","handleSubmit","e","preventDefault","post","data","message","window","location","response","status","container","form_container","target","value","input","error_msg","success_msg","green_btn"],"mappings":"qcAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,QAA9B,KAA8C,OAA9C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC3B,cAAgCL,QAAQ,CAAC,KAAD,CAAxC,wCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAsBT,QAAQ,CAAC,EAAD,CAA9B,yCAAOU,GAAP,eAAYC,MAAZ,eACA,eAA0BX,QAAQ,CAAC,EAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,KAAK,CAAGZ,SAAS,EAAvB,CACA,GAAMa,CAAAA,GAAG,uEAAkED,KAAK,CAACE,EAAxE,aAA8EF,KAAK,CAACG,KAApF,CAAT,CAEAlB,SAAS,CAAC,UAAM,CACf,GAAMmB,CAAAA,SAAS,0FAAG,yKAEVf,CAAAA,KAAK,CAACgB,GAAN,CAAUJ,GAAV,CAFU,QAGhBR,WAAW,CAAC,IAAD,CAAX,CAHgB,8EAKhBA,WAAW,CAAC,KAAD,CAAX,CALgB,mEAAH,kBAATW,CAAAA,SAAS,0CAAf,CAQAA,SAAS,GACT,CAVQ,CAUN,CAACJ,KAAD,CAAQC,GAAR,CAVM,CAAT,CAYA,GAAMK,CAAAA,YAAY,2FAAG,kBAAOC,CAAP,iJACpBA,CAAC,CAACC,cAAF,GADoB,wCAGInB,CAAAA,KAAK,CAACoB,IAAN,CAAWR,GAAX,CAAgB,CAAEP,QAAQ,CAARA,QAAF,CAAhB,CAHJ,yCAGXgB,IAHW,mBAGXA,IAHW,CAInBb,MAAM,CAACa,IAAI,CAACC,OAAN,CAAN,CACAZ,QAAQ,CAAC,EAAD,CAAR,CACAa,MAAM,CAACC,QAAP,CAAkB,QAAlB,CANmB,qFAQnB,GACC,aAAMC,QAAN,EACA,aAAMA,QAAN,CAAeC,MAAf,EAAyB,GADzB,EAEA,aAAMD,QAAN,CAAeC,MAAf,EAAyB,GAH1B,CAIE,CACDhB,QAAQ,CAAC,aAAMe,QAAN,CAAeJ,IAAf,CAAoBC,OAArB,CAAR,CACAd,MAAM,CAAC,EAAD,CAAN,CACA,CAfkB,uEAAH,kBAAZS,CAAAA,YAAY,6CAAlB,CAmBA,mBACC,KAAC,QAAD,WACEd,QAAQ,cACR,YAAK,SAAS,CAAEF,MAAM,CAAC0B,SAAvB,uBACC,cAAM,SAAS,CAAE1B,MAAM,CAAC2B,cAAxB,CAAwC,QAAQ,CAAEX,YAAlD,wBACC,wCADD,cAEC,cACC,IAAI,CAAC,UADN,CAEC,WAAW,CAAC,UAFb,CAGC,IAAI,CAAC,UAHN,CAIC,QAAQ,CAAE,kBAACC,CAAD,QAAOZ,CAAAA,WAAW,CAACY,CAAC,CAACW,MAAF,CAASC,KAAV,CAAlB,EAJX,CAKC,KAAK,CAAEzB,QALR,CAMC,QAAQ,KANT,CAOC,SAAS,CAAEJ,MAAM,CAAC8B,KAPnB,EAFD,CAWEtB,KAAK,eAAI,YAAK,SAAS,CAAER,MAAM,CAAC+B,SAAvB,UAAmCvB,KAAnC,EAXX,CAYEF,GAAG,eAAI,YAAK,SAAS,CAAEN,MAAM,CAACgC,WAAvB,UAAqC1B,GAArC,EAZT,cAaC,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAEN,MAAM,CAACiC,SAAxC,oBAbD,GADD,EADQ,cAqBR,qCAtBF,EADD,CA2BA,CAlED,CAoEA,cAAehC,CAAAA,aAAf","sourcesContent":["import { useEffect, useState, Fragment } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport styles from \"./styles.module.css\";\n\nconst PasswordReset = () => {\n\tconst [validUrl, setValidUrl] = useState(false);\n\tconst [password, setPassword] = useState(\"\");\n\tconst [msg, setMsg] = useState(\"\");\n\tconst [error, setError] = useState(\"\");\n\tconst param = useParams();\n\tconst url = `https://password-reset-url.herokuapp.com/api/password-reset/${param.id}/${param.token}`;\n\n\tuseEffect(() => {\n\t\tconst verifyUrl = async () => {\n\t\t\ttry {\n\t\t\t\tawait axios.get(url);\n\t\t\t\tsetValidUrl(true);\n\t\t\t} catch (error) {\n\t\t\t\tsetValidUrl(false);\n\t\t\t}\n\t\t};\n\t\tverifyUrl();\n\t}, [param, url]);\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst { data } = await axios.post(url, { password });\n\t\t\tsetMsg(data.message);\n\t\t\tsetError(\"\");\n\t\t\twindow.location = \"/login\";\n\t\t} catch (error) {\n\t\t\tif (\n\t\t\t\terror.response &&\n\t\t\t\terror.response.status >= 400 &&\n\t\t\t\terror.response.status <= 500\n\t\t\t) {\n\t\t\t\tsetError(error.response.data.message);\n\t\t\t\tsetMsg(\"\");\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{validUrl ? (\n\t\t\t\t<div className={styles.container}>\n\t\t\t\t\t<form className={styles.form_container} onSubmit={handleSubmit}>\n\t\t\t\t\t\t<h1>Add New Password</h1>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tclassName={styles.input}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{error && <div className={styles.error_msg}>{error}</div>}\n\t\t\t\t\t\t{msg && <div className={styles.success_msg}>{msg}</div>}\n\t\t\t\t\t\t<button type=\"submit\" className={styles.green_btn}>\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<h1>404 Not Found</h1>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default PasswordReset;\n"]},"metadata":{},"sourceType":"module"}